var ui={};
(function(d,e,g,b){b.observable=function(a){function c(a){f.forEach(function(b,c){b(a,c)})}function b(b){arguments.length&&b!=a&&(a=b,c(b));return a}var f=[];b.subscribe=function(a){f.push(a)};b.get_listeners=function(){return f};b.garbage=function(a){f.splice(a,1)};return b};b.observable_array=function(a){function b(a){f.forEach(function(b,c){b(a,c)})}function d(c){arguments.length&&c.length!=a.length&&(a=c,b(c));return a}var f=[];d.subscribe=function(a){f.push(a)};d.get_listeners=function(){return f};d.garbage=
function(a){f.splice(a,1)};return d};b.bind_css=function(a,c){d.each(c,function(c,d){a.css(c,d());d.subscribe(function(f,h){b.contains(a)?a.css(c,d()):d.garbage(\u00edndex)})})};b.bind_html=function(a,c){c();a.html(c());c.subscribe(function(d,f){b.contains(a)?a.html(c()):c.garbage(f)})};b.bind_text=function(a,c){c();a.text(c());c.subscribe(function(d,f){b.contains(a)?a.text(c()):c.garbage(f)})};b.bind_input=function(a,c){c();a.val(c());c.subscribe(function(d,f){b.contains(a)?a.html(c()):c.garbage(f)});
a.on("keyup",function(){c(d(this).val())})};b.bind_event=function(a){b["bind_"+a]=function(b,d){b.on(a,function(){d()})}};"click blur mouseout mousein mouseover hover".split(" ").forEach(function(a){b.bind_event(a)});b.contains=function(a){return d.contains(document,a[0])};b.scan_el=function(a,c){a.find("[data-bind]").add(a).each(function(){b.contains(d(this))&&c(d(this))})};b.add_binding=function(a,c){b["bind_"+a]=c};b.init_binding=function(a){b.scan_data_bind(d("*"),a)};b.scan_data_bind=function(a,
c){b.scan_el(a,function(a){if(a.data("bind")){var f=a.data("bind");f=(new Function("","return {"+f+"};"))();d.each(f,function(f,e){var g="bind_"+f;if("object"==typeof e)d.each(e,function(a,b){e[a]=c[b]}),b[g](a,e);else b[g](a,c[e])})}})};b.bind_foreach=function(a,c){function e(c){a.html("");console.log(c);d.each(c,function(c,e){var g=f.clone();if("object"==typeof e)d.each(e,function(a,c){e[a]=b.observable(c)}),a.append(g),b.scan_data_bind(g,e);else{var h={};h.$value=b.observable(e);a.append(g);b.scan_data_bind(g,
h)}})}var f=d(a.html()).clone();e(c());c.subscribe(function(a){e(a)})};b.computed=function(a,c){var d=b.observable(a());c.forEach(function(b){b.subscribe(function(b){d(a())})});return d}})(jQuery,window,void 0,ui);ui.add_binding("visible",function(d,e){function g(){e()?d.show():e()||d.hide()}g();e.subscribe(function(b,a){ui.contains(d)?g():e.garbage(a)})});
ui.add_binding("checked",function(d,e){function g(){e()?d.is(":checked")||d.trigger("click"):d.is(":checked")&&d.trigger("click")}d.on("click",function(){d.is(":checked")?e(!0):e(!1)});e.subscribe(function(b,a){ui.contains(d)?g():e.garbage(a)});g()});ui.add_binding("disabled",function(d,e){function g(){e()?d.attr("disabled","disabled"):d.removeAttr("disabled")}e.subscribe(function(b,a){ui.contains(d)?g():ui.garbage(a)});g()});
